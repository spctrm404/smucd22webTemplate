@use 'sass:color';
@use 'sass:list';
@use 'sass:map';
@use 'sass:math';
@import 'customizations';
@import 'functions';

@mixin getFontPropertiesFromStyle($styleName) {
  $prop-value: map.get($fontStyles, $styleName);
  @each $prop, $value in $prop-value {
    #{$prop}: #{$value};
  }
}

@function getColorFromPalettes($paletteName, $colorNumber) {
  $number-value: map.get($colorPalettes, $paletteName);
  $color: map.get($number-value, $colorNumber);
  @return $color;
}

@function getColorByToken($tokenName, $paletteName: 'neutral') {
  $color: transparent;
  $data: map.get($colorTokens, $tokenName);
  @if (type-of($data) == 'map') {
    @if (map.has-key($data, 'bg')) and (map.has-key($data, 'fg')) {
      $bg: map.get($data, 'bg');
      $bgPaletteName: map.get($bg, 'palette');
      $bgColorNumber: map.get($bg, 'number');
      $bgOpacity: map.get($bg, 'opacity');
      $bgColor: getColorFromPalettes($bgPaletteName, $bgColorNumber);
      $fg: map.get($data, 'fg');
      $fgPaletteName: map.get($fg, 'palette');
      @if ($fgPaletteName == '') {
        $fgPaletteName: $paletteName;
      }
      $fgColorNumber: map.get($fg, 'number');
      $fgOpacity: map.get($fg, 'opacity');
      $fgColor: getColorFromPalettes($fgPaletteName, $fgColorNumber);
      $color: blend-transparent(
        rgba($bgColor, $bgOpacity),
        rgba($fgColor, $fgOpacity)
      );
    } @else {
      @each $paletteNameInData, $colorNumber in $data {
        $color: getColorFromPalettes($paletteNameInData, $colorNumber);
      }
    }
  } @else {
    $color: getColorFromPalettes($paletteName, $data);
  }
  @return $color;
}

@mixin getShadowPropertiesFromStyle($styleName) {
  $prop-value: map.get($shadowStyles, $styleName);
  @each $prop, $value in $prop-value {
    #{$prop}: #{$value};
  }
}

@mixin ge($value) {
  @if (type-of($value) == 'number') {
    @media (min-width: #{$value}) {
      @content;
    }
  } @else if (type-of($value) == 'string') {
    $bpMap: map.get($breakponts, $value);
    $minWidth: map.get($bpMap, 'min-width');
    @media (min-width: #{$minWidth}) {
      @content;
    }
  }
}

@mixin le($value) {
  @if (type-of($value) == 'number') {
    @media (max-width: #{$value}) {
      @content;
    }
  } @else if (type-of($value) == 'string') {
    $bpMap: map.get($breakponts, $value);
    $nextKey: map.get($bpMap, 'next-key');
    $bpNextMap: map.get($breakponts, $nextKey);
    $maxWidth: 9999px;
    @if ($nextKey != '') {
      $maxWidth: map.get($bpNextMap, 'min-width') - 1px;
    }
    @media (max-width: #{$maxWidth}) {
      @content;
    }
  }
}

@mixin eq($value) {
  @if (type-of($value) == 'string') {
    $bpMap: map.get($breakponts, $value);
    $minWidth: map.get($bpMap, 'min-width');
    $nextKey: map.get($bpMap, 'next-key');
    $maxWidth: 9999px;
    @if ($nextKey != '') {
      $bpNextMap: map.get($breakponts, $nextKey);
      $maxWidth: map.get($bpNextMap, 'min-width') - 1px;
    }
    @media (min-width: #{$minWidth}) and (max-width: #{$maxWidth}) {
      @content;
    }
  }
}

@mixin gele($valueA, $valueB) {
  $minWidth: 0px;
  $maxWidth: 9999px;
  @if (type-of($valueA) == 'number') and (type-of($valueB) == 'number') {
    $minWidth: math.min($valueA, $valueB);
    $maxWidth: math.max($valueA, $valueB);
  } @else if (type-of($valueA) == 'string') and (type-of($valueB) == 'string') {
    $bpMapA: map.get($breakponts, $valueA);
    $minWidthA: map.get($bpMapA, 'min-width');
    $nextKeyA: map.get($bpMapA, 'next-key');
    $maxWidthA: 9999px;
    @if ($nextKeyA != '') {
      $bpNextMapA: map.get($breakponts, $nextKeyA);
      $maxWidthA: map.get($bpNextMapA, 'min-width') - 1px;
    }
    $bpMapB: map.get($breakponts, $valueB);
    $minWidthB: map.get($bpMapB, 'min-width');
    $nextKeyB: map.get($bpMapB, 'next-key');
    $maxWidthB: 9999px;
    @if ($nextKeyB != '') {
      $bpNextMapB: map.get($breakponts, $nextKeyB);
      $maxWidthB: map.get($bpNextMapB, 'min-width') - 1px;
    }
    $minWidth: math.min($minWidthA, $minWidthB);
    $maxWidth: math.max($maxWidthA, $maxWidthB);
  } @else if (type-of($valueA) == 'string') {
    $bpMap: map.get($breakponts, $valueA);
    $minWidth: map.get($bpMap, 'min-width');
    $nextKey: map.get($bpMap, 'next-key');
    $maxWidth: 9999px;
    @if ($nextKey != '') {
      $bpNextMap: map.get($breakponts, $nextKey);
      $maxWidth: map.get($bpNextMap, 'min-width') - 1px;
    }
    $minWidth: math.min($minWidth, $valueB);
    $maxWidth: math.max($maxWidth, $valueB);
  } @else if (type-of($valueB) == 'string') {
    $bpMap: map.get($breakponts, $valueB);
    $minWidth: map.get($bpMap, 'min-width');
    $nextKey: map.get($bpMap, 'next-key');
    $maxWidth: 9999px;
    @if ($nextKey != '') {
      $bpNextMap: map.get($breakponts, $nextKey);
      $maxWidth: map.get($bpNextMap, 'min-width') - 1px;
    }
    $minWidth: math.min($minWidth, $valueA);
    $maxWidth: math.max($maxWidth, $valueA);
  }
  @media (min-width: #{$minWidth}) and (max-width: #{$maxWidth}) {
    @content;
  }
}
